function mostrarMensaje(e,a){UIkit.notification({message:e,status:a})}function filtrar(){$.post("controlador_catalogo.php",{busq:$("#buscarNom").val(),minAge:$("#minAge").val(),maxAge:$("#maxAge").val(),sort:$("#sort").val(),order:$('input[name="order"]:checked').val(),macho:$("#macho").is(":checked"),hembra:$("#hembra").is(":checked"),pequeno:$("#pequeno").is(":checked"),mediano:$("#mediano").is(":checked"),grande:$("#grande").is(":checked"),raza:$("#filtro-raza").val(),personalidad:$("#filtro-personalidad").val(),condicion:$("#filtro-condicion").val(),estado:$("#filtro-estado").val()}).done(function(e){$("#contenido-catalogo").html(e),setElEditar(),setElInfo()})}function muestraEditarPerro(e){$.post("vista_editar_perro.php",{idPerro:e}).done(function(e,a,o){200===o.status&&"success"==a&&($("#modal-editar").html(e),UIkit.modal($("#modal-editar")).show(),$("#eliminar")[0].onclick=eliminar,$("#btn-editar")[0].onclick=submitEdicion)})}function setElEditar(){let e=document.getElementsByClassName("boton-editar");for(btn of e)btn.addEventListener("click",function(e){muestraEditarPerro(e.target.getAttribute("idPerro"))})}function setElInfo(){let e=document.getElementsByClassName("boton-info");for(btn of e)btn.addEventListener("click",function(e){muestraInfoPerro(e.target.getAttribute("idPerro"))})}function muestraInfoPerro(e){$.post("vista_info_perro.php",{idPerro:e}).done(function(e,a,o){200===o.status&&"success"==a&&($("#modal-info").html(e),UIkit.modal($("#modal-info")).show())})}function eliminar(){confirm("¿Estas seguro de eliminar el perro?")&&$.post("controlador_elimina_perro.php",{idperro:$("#eliminar").attr("idperro")}).done(function(e){0!==parseInt(e)?(UIkit.modal($("#modal-editar")).hide(),filtrar(),mostrarMensaje("Se eliminó el perro exitosamente","success")):mostrarMensaje("Hubo un error al eliminar al perro","danger")})}function submitEdicion(){$.post("controlador_editar_perro.php",{idPerro:$("#eliminar").attr("idPerro"),nombre:$("#nombre").val(),tamanio:$("#tamanio").val(),anios:$("#anios").val(),meses:$("#meses").val(),sexo:$('input[name="sexo"]:checked').val(),historia:$("#historia").val(),raza:$("#raza").val(),condiciones_medicas:$("#condiciones-medicas").val(),personalidad:$("#personalidad").val(),estado:$("#estado").val()}).done(function(e){parseInt(e)>0?(UIkit.modal($("#modal-editar")).hide(),filtrar(),mostrarMensaje("Se actualizó el perro exitosamente","success")):mostrarMensaje("Hubo un error al actualizar al perro","danger")})}function readTextFile(e,a){let o=new XMLHttpRequest;o.overrideMimeType("application/json"),o.open("POST",e,!0),o.onreadystatechange=function(){4===o.readyState&&"200"==o.status&&a(o.responseText)},o.send(null)}function mostrarPreguntas(){readTextFile("preguntas.json",function(e){let a=JSON.parse(e),o=0,t="";for(o=0;o<a.length;o++)""!=a[o].pregunta&&""!=a[o].respuesta&&(t+='<li class="uk-closed"><a class="uk-accordion-title" href="#">'+a[o].pregunta+'</a><div class="uk-accordion-content"><p>'+a[o].respuesta+"</p></div></li>");document.getElementById("lista-preguntas").innerHTML=t})}function editarPreguntas(){$.post("vista_editar_preguntas.php",{}).done(function(e,a,o){200===o.status&&"success"==a&&($("#modal-editar-preguntas").html(e),UIkit.modal($("#modal-editar-preguntas")).show(),readTextFile("preguntas.json",function(e){let a,o=JSON.parse(e),t=0;for(t=0;t<o.length;t++)a=t+1,document.getElementById("seccion-preguntas").innerHTML+='<div class="uk-margin"><label class="uk-form-label" for="nombre">Pregunta '+a+'</label><div class="uk-form-controls"><input class="uk-input uk-border-rounded pregunta" idpregunta='+t+'  type="text" placeholder=\''+o[t].pregunta+"' value='"+o[t].pregunta+"'></div></div>",document.getElementById("seccion-preguntas").innerHTML+='<div class="uk-margin"><label class="uk-form-label" for="nombre">Respuesta '+a+'</label><div class="uk-form-controls"><textarea class="uk-textarea uk-border-rounded respuesta" idrespuesta='+t+' type="text" placeholder=\''+o[t].respuesta+"' value='"+o[t].respuesta+"'>"+o[t].respuesta+"</textarea></div></div>",document.getElementById("seccion-preguntas").innerHTML+="<br>"}),$("#btn-editar-preguntas")[0].onclick=submitEditarPreguntas)})}function mostrarContacto(){readTextFile("contacto.json",function(e){let a=JSON.parse(e),o="";o+="<p><span uk-icon='receiver'></span>"+a[0].nombre+": "+a[0].telefono+"</p><p><span uk-icon='mail'></span><a href='mailto:"+a[0].correo+"' target='_blank'> "+a[0].correo+"</a></p><p><span uk-icon='location'></span><a href='https://www.google.com.mx/maps/place/ "+a[0].direccion+"' target='_blank'>"+a[0].direccion+"</a></p>",document.getElementById("info-contacto").innerHTML=o})}function mostrarEdicionContacto(){readTextFile("contacto.json",function(e){let a=JSON.parse(e),o="";o+='<div class="uk-margin"><label class="uk-form-label" for="nombre">Nombre </label><div class="uk-form-controls"><input class="uk-input uk-border-rounded nombre"   type="text" placeholder=\''+a[0].nombre+"' value='"+a[0].nombre+"'></div></div>",o+='<div class="uk-margin"><label class="uk-form-label" for="nombre">Teléfono </label><div class="uk-form-controls"><input class="uk-input uk-border-rounded telefono"   type="text" placeholder=\''+a[0].telefono+"' value='"+a[0].telefono+"'></div></div>",o+='<div class="uk-margin"><label class="uk-form-label" for="nombre">Correo </label><div class="uk-form-controls"><input class="uk-input uk-border-rounded correo"   type="text" placeholder=\''+a[0].correo+"' value='"+a[0].correo+"'></div></div>",o+='<div class="uk-margin"><label class="uk-form-label" for="nombre">Dirección</label><div class="uk-form-controls"><input class="uk-input uk-border-rounded direccion"   type="text" placeholder=\''+a[0].direccion+"' value='"+a[0].direccion+"'></div></div>",document.getElementById("seccion-contacto").innerHTML=o})}function editarContacto(){$.post("panelControl.php",{}).done(function(e,a,o){200===o.status&&"success"==a&&($("#seccion-contacto").html(e),readTextFile("contacto.json",function(e){let a=JSON.parse(e);document.getElementById("seccion-contacto").innerHTML+='<div class="uk-margin"><label class="uk-form-label" for="nombre">Nombre </label><div class="uk-form-controls"><input class="uk-input uk-border-rounded nombre"   type="text" placeholder=\''+a[0].nombre+"' value='"+a[0].nombre+"'></div></div>",document.getElementById("seccion-contacto").innerHTML+='<div class="uk-margin"><label class="uk-form-label" for="nombre">Teléfono </label><div class="uk-form-controls"><input class="uk-input uk-border-rounded telefono"   type="text" placeholder=\''+a[0].telefono+"' value='"+a[0].telefono+"'></div></div>",document.getElementById("seccion-contacto").innerHTML+='<div class="uk-margin"><label class="uk-form-label" for="nombre">Correo </label><div class="uk-form-controls"><input class="uk-input uk-border-rounded correo"   type="text" placeholder=\''+a[0].correo+"' value='"+a[0].correo+"'></div></div>",document.getElementById("seccion-contacto").innerHTML+='<div class="uk-margin"><label class="uk-form-label" for="nombre">Dirección</label><div class="uk-form-controls"><input class="uk-input uk-border-rounded direccion"   type="text" placeholder=\''+a[0].direccion+"' value='"+a[0].direccion+"'></div></div>"}),$("#editar-contacto")[0].onclick=submitEditarContacto)})}function submitEditarContacto(){if(confirm("¿Estas seguro de guardar la información de contacto?")){let e=$(".nombre").val(),a=$(".correo").val(),o=$(".direccion").val(),t=$(".telefono").val();$.post("controlador_editar_contacto.php",{nombre:e,correo:a,direccion:o,telefono:t}).done(function(e){0!==parseInt(e)?(mostrarMensaje("Se actualizó la información de contacto exitosamente","success"),mostrarContacto(),mostrarEdicionContacto()):mostrarMensaje("Hubo un error al actualizar la información de contacto ","danger")})}}function submitEditarPreguntas(){if(confirm("¿Estas seguro de guardar las preguntas frecuentes?")){let e={},a=$(".respuesta"),o=$(".pregunta"),t={};for(pr of a)e[pr.getAttribute("idrespuesta")]=pr.value;for(pr of o)t[pr.getAttribute("idpregunta")]=pr.value;e.length=a.length,t.length=o.length,$.post("controlador_editar_preguntas.php",{datos:e,datosp:t}).done(function(e){0!==parseInt(e)?(mostrarMensaje("Se actualizaron las preguntas exitosamente","success"),mostrarPreguntas(),UIkit.modal($("#modal-editar-preguntas")).hide()):mostrarMensaje("Hubo un error al actualizar las preguntas ","danger")})}}function mostrarCambiarC(){$.post("vista_cambiarContra.php").done(function(e){$("#modal-cambiar-c").html(e),UIkit.modal($("#modal-cambiar-c")).show(),document.getElementById("cambiarContra").onclick=sendMailContra})}function sendMailContra(){document.getElementById("cambiarContra").disabled=!0,document.getElementById("cambiarContra").innerHTML="<div uk-spinner class='uk-position-fixed uk-transform-center'></div>",$.post("controlador_mail_cambioContra.php",{mail:$("#email-contra").val()}).done(function(e){switch(parseInt(e)){case 200:mostrarMensaje("Recibirá un correo con instrucciones para cambiar su contraseña","primary"),UIkit.modal($("#modal-cambiar-c")).hide();break;case 404:mostrarMensaje("Error: La cuenta no existe","danger"),mostrarCambiarC()}document.getElementById("cambiarContra").disabled=!1,document.getElementById("cambiarContra").innerHTML="Cambiar mi contraseña"})}function sendMailContraNoModal(){document.getElementById("cambiarContra").disabled=!0,document.getElementById("cambiarContra").innerHTML="<div uk-spinner class='uk-position-fixed uk-transform-center'></div>",$.post("controlador_mail_cambioContra.php",{mail:$("#email-contra").val()}).done(function(e){switch(parseInt(e)){case 200:mostrarMensaje("Recibirá un correo con instrucciones para cambiar su contraseña","primary");break;case 404:mostrarMensaje("Error: La cuenta no existe","danger")}document.getElementById("cambiarContra").disabled=!1,document.getElementById("cambiarContra").innerHTML="Cambiar mi contraseña"})}function nuevaSolicitud(){$.post("controlador_nueva_solicitud.php",{idUsuario:$("#idusuario").val(),idPerro:$("#idperro").val(),res1:$('input[name="1"]:checked').val(),res2:$('input[name="2"]:checked').val(),res3:$("#3").val(),res4:$("#4").val(),res5:$("#5").val(),res6:$('input[name="6"]:checked').val(),res7:$('input[name="7"]:checked').val(),res8:$('input[name="8"]:checked').val(),res9:$('input[name="9"]:checked').val(),res10:$("#10").val(),res11:$("#11").val(),res12:$('input[name="12"]:checked').val()}).done(function(e){0!=e?(mostrarMensaje("Se completó el formulario correctamente","success"),setTimeout(function(){window.location.href="misSolicitudes"},2e3)):mostrarMensaje("Error al enviar el formulario, intente nuevamente.","danger")})}function cambiarContra(){$.post("controlador_cambiarContra.php",{uid:document.getElementById("uid").value,contrasenia:document.getElementById("contrasenia").value,verifContrasenia:document.getElementById("verifContrasenia").value}).done(function(e,a,o){switch(o.status){case 200:mostrarMensaje(e,"primary"),setTimeout(()=>location.replace("iniciarSesion"),2500);break;default:mostrarMensaje(e,"danger")}})}function muestraSolicitudes(){$.get("vista_gestionar_solicitudes.php").done(function(e){$("#tablaSolicitudes").html(e),setELSolicitudes(),setELSolicitudesPago(),setELSolicitudesEntrevista(),setELAprobarSolicitudes(),setELRechazarSolicitudes()})}function muestraMisSolicitudes(){$.post("vista_misSolicitudes.php",{idUsuario:$("#idUsuario").val()}).done(function(e){$("#tablaMisSolicitudes").html(e),setELSolicitudes_UR(),setELSolicitudesPago_UR(),setELSolicitudesEntrevista_UR()})}function muestraAlertOperador(e){msj=confirm("¿Estás seguro que quieres eliminar este operador?\nEsta acción no se puede deshacer."),msj&&$.post("controlador_elimina_operador.php",{id:e}).done(function(e){0!=parseInt(e)?(location.replace("gestionarOperadores"),mostrarMensaje("El operador fue eliminado exitosamente","success")):mostrarMensaje("Hubo un error al eliminar al operador.\nPor favor, intenta de nuevo.","danger")})}function muestraAlert(e){msj=confirm("¿Estás seguro que quieres eliminar tu solicitud?\nEsta acción no se puede deshacer."),msj&&$.post("controlador_elimina_solicitud.php",{idSol:e}).done(function(e){0!=parseInt(e)?(location.replace("misSolicitudes"),mostrarMensaje("La solicitud fue eliminada exitosamente","success")):mostrarMensaje("Hubo un error al eliminar la solicitud.\nPor favor, intenta de nuevo.","danger")})}function editarPerfil(){msj=confirm("¿Estás seguro que quieres aplicar tus cambios?\nEsta acción no se puede deshacer."),msj&&$.post("controlador_edita_perfil.php",{idUsuario:$("#idUsuario").val(),nombre:$("#nombre").val(),apellido:$("#apellido").val(),fechaNacimiento:$("#fechaNacimiento").val(),telefono:$("#telefono").val(),principal:$("#principal").val(),secundaria:$("#secundaria").val(),numExt:$("#numExt").val(),numInt:$("#numInt").val(),cp:$("#cp").val(),colonia:$("#colonia").val(),ciudad:$("#ciudad").val(),estado:$("#estado").val()}).done(function(e){0!=parseInt(e)?mostrarMensaje("Tu perfil se actualizó correctamente","success"):mostrarMensaje("Hubo un problema actualizando tu perfil.\nPor favor, intenta de nuevo.","danger")})}function setELSolicitudes(){let e=document.getElementsByClassName("formulario");for(btn of e){let e=btn.getAttribute("idSolicitud");btn.addEventListener("click",function(a){muestraSolicitud(e)})}}function muestraSolicitud(e){$.post("vista_solicitud.php",{idSolicitud:e}).done(function(e,a,o){200===o.status&&"success"==a&&($("#formulario").html(e),$("#aprobar")[0].onclick=aprobarFormulario,$("#rechazar")[0].onclick=rechazarFormulario,UIkit.modal($("#formulario")).show())})}function aprobarFormulario(){msj=confirm("¿Estás seguro que quieres aprobar este formulario?"),msj&&$.post("controlador_aprobar_formulario.php",{idSolicitud:$("#idSolicitudActiva").val(),aprobar:!0}).done(function(e){0!=parseInt(e)?mostrarMensaje("El formulario se aprobó correctamente.","success"):mostrarMensaje("Hubo un error al aprobar el formulario.\nPor favor, intenta de nuevo.","danger"),muestraSolicitudes(),UIkit.modal($("#formulario")).hide()})}function rechazarFormulario(){msj=confirm("¿Estás seguro que quieres rechazar este formulario?"),msj&&$.post("controlador_aprobar_formulario.php",{idSolicitud:$("#idSolicitudActiva").val(),aprobar:!1}).done(function(e){0!=parseInt(e)?mostrarMensaje("El formulario se rechazó correctamente.","success"):mostrarMensaje("Hubo un error al rechazar el formulario.\nPor favor, intenta de nuevo.","danger"),muestraSolicitudes(),UIkit.modal($("#formulario")).hide()})}function setELSolicitudesEntrevista(){let e=document.getElementsByClassName("entrevista");for(btn of e){let e=btn.getAttribute("idSolicitud");btn.addEventListener("click",function(a){muestraSolicitudEntrevista(e)})}}function muestraSolicitudEntrevista(e){$.post("vista_aprobar_entrevista.php",{idSolicitud:e}).done(function(e,a,o){200===o.status&&"success"==a&&($("#entrevista").html(e),$("#entrevistaSi")[0].onclick=aprobarEntrevista,$("#entrevistaNo")[0].onclick=rechazarEntrevista,UIkit.modal($("#entrevista")).show())})}function aprobarEntrevista(){msj=confirm("¿Estás seguro que deseas rechazar la entrevista?"),msj&&$.post("controlador_aprobar_entrevista.php",{idSolicitud:$("#idSolicitudActivaEntrevista").val(),aprobarEntrevista:!0}).done(function(e){0!=parseInt(e)?mostrarMensaje("La entrevista se aprobó correctamente.","success"):mostrarMensaje("Hubo un error al aprobar la entrevista.\nPor favor, intenta de nuevo.","danger"),muestraSolicitudes(),UIkit.modal($("#entrevista")).hide()})}function rechazarEntrevista(){msj=confirm("¿Estás seguro deseas rechazar la entrevista?"),msj&&$.post("controlador_aprobar_entrevista.php",{idSolicitud:$("#idSolicitudActivaEntrevista").val(),aprobarEntrevista:!1}).done(function(e){0!=parseInt(e)?mostrarMensaje("La entrevista se rechazó correctamente.","success"):mostrarMensaje("Hubo un error al rechazar la entrevista.\nPor favor, intenta de nuevo.","danger"),muestraSolicitudes(),UIkit.modal($("#entrevista")).hide()})}function setELSolicitudesPago(){let e=document.getElementsByClassName("pago");for(btn of e){let e=btn.getAttribute("idSolicitud");btn.addEventListener("click",function(a){muestraSolicitudPago(e)})}}function muestraSolicitudPago(e){$.post("vista_aprobar_pago.php",{idSolicitud:e}).done(function(e,a,o){200===o.status&&"success"==a&&($("#pago").html(e),$("#aprobarPago")[0].onclick=aprobarPago,$("#rechazarPago")[0].onclick=rechazarPago,UIkit.modal($("#pago")).show())})}function aprobarPago(){msj=confirm("¿Estás seguro que deseas aprobar el pago?"),msj&&$.post("controlador_aprobar_pago.php",{idSolicitud:$("#idSolicitudActivaPago").val(),aprobarPago:!0}).done(function(e){0!=parseInt(e)?mostrarMensaje("El pago se aprobó correctamente.","success"):mostrarMensaje("Hubo un error al aprobar el pago.\nPor favor, intenta de nuevo.","danger"),muestraSolicitudes(),UIkit.modal($("#pago")).hide()})}function rechazarPago(){msj=confirm("¿Estás seguro deseas rechazar el pago?"),msj&&$.post("controlador_aprobar_pago.php",{idSolicitud:$("#idSolicitudActivaPago").val(),aprobarPago:!1}).done(function(e){0!=parseInt(e)?mostrarMensaje("El pago se rechazó correctamente.","success"):mostrarMensaje("Hubo un error al rechazar el pago.\nPor favor, intenta de nuevo.","danger"),muestraSolicitudes(),UIkit.modal($("#pago")).hide()})}function setELAprobarSolicitudes(){let e=document.getElementsByClassName("apruebaSolicitud");for(btn of e){let e=btn.getAttribute("idSolicitud");btn.addEventListener("click",function(a){apruebaSolicitud(e)})}}function setELRechazarSolicitudes(){let e=document.getElementsByClassName("rechazarSolicitud");for(btn of e){let e=btn.getAttribute("idSolicitud");btn.addEventListener("click",function(a){rechazarSolicitud(e)})}}function apruebaSolicitud(){msj=confirm("¿Estás seguro que deseas aprobar esta solicitud?"),msj&&$.post("controlador_aprobar_solicitud.php",{idSolicitud:idSolicitud,aprobarPago:!0}).done(function(e){0!=parseInt(e)?mostrarMensaje("Se aprobó correctamente la solicitud.","success"):mostrarMensaje("Hubo un error al aprobar la solicitud.\nPor favor, intenta de nuevo.","danger"),muestraSolicitudes()})}function rechazarSolicitud(){msj=confirm("¿Estás seguro que deseas rechazar esta solicitud?"),msj&&$.post("controlador_aprobar_solicitud.php",{idSolicitud:idSolicitud,aprobarPago:!1}).done(function(e){0!=parseInt(e)?mostrarMensaje("Se rechazó correctamente la solicitud.","success"):mostrarMensaje("Hubo un error al rechazar la solicitud.\nPor favor, intenta de nuevo.","danger"),muestraSolicitudes()})}function setELSolicitudes_UR(){let e=document.getElementsByClassName("urformulario");for(btn of e){let e=btn.getAttribute("idSolicitud");btn.addEventListener("click",function(a){muestraSolicitudUR(e)})}}function muestraSolicitudUR(e){$.post("vista_solicitud_ur.php",{idSolicitud:e}).done(function(e,a,o){200===o.status&&"success"==a&&($("#urformulario").html(e),UIkit.modal($("#urformulario")).show())})}function setELSolicitudesEntrevista_UR(){let e=document.getElementsByClassName("urentrevista");for(btn of e){let e=btn.getAttribute("idSolicitud");btn.addEventListener("click",function(a){muestraSolicitudEntrevistaUR(e)})}}function muestraSolicitudEntrevistaUR(e){$.post("vista_entrevista_ur.php",{idSolicitud:e}).done(function(e,a,o){200===o.status&&"success"==a&&($("#urentrevista").html(e),UIkit.modal($("#urentrevista")).show())})}function setELSolicitudesPago_UR(){let e=document.getElementsByClassName("urpago");for(btn of e){let e=btn.getAttribute("idSolicitud");btn.addEventListener("click",function(a){muestraSolicitudPagoUR(e)})}}function muestraSolicitudPagoUR(e){$.post("vista_pago_ur.php",{idSolicitud:e}).done(function(e,a,o){200===o.status&&"success"==a&&($("#urpago").html(e),$("#actualizarMetodo")[0].onclick=actualizarMetodoPago,UIkit.modal($("#urpago")).show()),console.log(o)})}function actualizarMetodoPago(){msj=confirm("¿Estás seguro que deseas usar este método de pago?"),msj&&$.post("controlador_actualizar_pago.php",{idSolicitud:$("#idSolicitudActivaMetodoPago").val(),metodo:$("#metodoPago").val()}).done(function(e){0!=parseInt(e)?mostrarMensaje("El método de pago se actualizó correctamente.","success"):mostrarMensaje("Hubo un error al actualizar el método pago.\nPor favor, intenta de nuevo.","danger"),muestraSolicitudes(),UIkit.modal($("#urpago")).hide()})}